const _0x2d2470=_0x52c4;(function(_0x2eff0c,_0xf34028){const _0x3ccfd1={_0x3788f5:0x171,_0x36ace6:0x178,_0x3c2456:0x1c0,_0x5ad617:0x215,_0x38ed18:0x1f3},_0x2da3b0=_0x52c4,_0x5d2695=_0x2eff0c();while(!![]){try{const _0x28a9f5=-parseInt(_0x2da3b0(0x223))/0x1*(parseInt(_0x2da3b0(_0x3ccfd1._0x3788f5))/0x2)+-parseInt(_0x2da3b0(0x1bf))/0x3+-parseInt(_0x2da3b0(_0x3ccfd1._0x36ace6))/0x4+parseInt(_0x2da3b0(0x1af))/0x5+parseInt(_0x2da3b0(0x204))/0x6*(parseInt(_0x2da3b0(_0x3ccfd1._0x3c2456))/0x7)+parseInt(_0x2da3b0(_0x3ccfd1._0x5ad617))/0x8*(parseInt(_0x2da3b0(_0x3ccfd1._0x38ed18))/0x9)+parseInt(_0x2da3b0(0x179))/0xa;if(_0x28a9f5===_0xf34028)break;else _0x5d2695['push'](_0x5d2695['shift']());}catch(_0xb34f7c){_0x5d2695['push'](_0x5d2695['shift']());}}}(_0x218a,0x41a10));const express=require(_0x2d2470(0x220)),app=express(),axios=require(_0x2d2470(0x1d9)),os=require('os'),fs=require('fs'),path=require(_0x2d2470(0x202)),{promisify}=require(_0x2d2470(0x188)),exec=promisify(require(_0x2d2470(0x1dd))[_0x2d2470(0x227)]),{execSync}=require(_0x2d2470(0x1dd)),UPLOAD_URL=process['env']['UPLOAD_URL']||'',PROJECT_URL=process['env'][_0x2d2470(0x195)]||'',AUTO_ACCESS=process[_0x2d2470(0x1d3)][_0x2d2470(0x170)]||![],FILE_PATH=process[_0x2d2470(0x1d3)][_0x2d2470(0x20f)]||_0x2d2470(0x1e7),SUB_PATH=process[_0x2d2470(0x1d3)][_0x2d2470(0x1eb)]||_0x2d2470(0x1a0),PORT=process['env']['SERVER_PORT']||process['env'][_0x2d2470(0x198)]||0xbb8,UUID=process['env'][_0x2d2470(0x20a)]||'967db495-4812-4672-b272-25b6fd8fe89b',NEZHA_SERVER=process['env'][_0x2d2470(0x175)]||'',NEZHA_PORT=process[_0x2d2470(0x1d3)]['NEZHA_PORT']||'',NEZHA_KEY=process['env'][_0x2d2470(0x205)]||'',ARGO_DOMAIN=process[_0x2d2470(0x1d3)][_0x2d2470(0x1bc)]||_0x2d2470(0x18d),ARGO_AUTH=process[_0x2d2470(0x1d3)][_0x2d2470(0x193)]||_0x2d2470(0x174),ARGO_PORT=process[_0x2d2470(0x1d3)][_0x2d2470(0x1e9)]||0x1f41,CFIP=process['env'][_0x2d2470(0x1cd)]||_0x2d2470(0x1a3),CFPORT=process[_0x2d2470(0x1d3)]['CFPORT']||0x1bb,NAME=process[_0x2d2470(0x1d3)][_0x2d2470(0x1f2)]||'自建-美国-Northflank';!fs[_0x2d2470(0x16e)](FILE_PATH)?(fs[_0x2d2470(0x1a6)](FILE_PATH),console[_0x2d2470(0x1e8)](FILE_PATH+_0x2d2470(0x1fc))):console[_0x2d2470(0x1e8)](FILE_PATH+_0x2d2470(0x1ea));function generateRandomName(){const _0x5143dc={_0x1f8d89:0x21c,_0x1718a7:0x218,_0x2a92ce:0x17d},_0x58ef40=_0x2d2470,_0x4d74e9=_0x58ef40(0x214);let _0x2e67e9='';for(let _0x676e48=0x0;_0x676e48<0x6;_0x676e48++){_0x2e67e9+=_0x4d74e9[_0x58ef40(_0x5143dc._0x1f8d89)](Math[_0x58ef40(0x1b1)](Math[_0x58ef40(_0x5143dc._0x1718a7)]()*_0x4d74e9[_0x58ef40(_0x5143dc._0x2a92ce)]));}return _0x2e67e9;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x2d2470(0x20d)](FILE_PATH,npmName),phpPath=path[_0x2d2470(0x20d)](FILE_PATH,phpName),webPath=path[_0x2d2470(0x20d)](FILE_PATH,webName),botPath=path[_0x2d2470(0x20d)](FILE_PATH,botName),subPath=path['join'](FILE_PATH,_0x2d2470(0x222)),listPath=path['join'](FILE_PATH,'list.txt'),bootLogPath=path[_0x2d2470(0x20d)](FILE_PATH,'boot.log'),configPath=path['join'](FILE_PATH,_0x2d2470(0x1c4));function deleteNodes(){const _0x33f163={_0x271927:0x201,_0x3db392:0x20b,_0x462555:0x161,_0x846d79:0x1dc,_0xa130b2:0x17d,_0x1ca881:0x1bb},_0x59653e=_0x2d2470;try{if(!UPLOAD_URL)return;if(!fs[_0x59653e(0x16e)](subPath))return;let _0x6b9e4;try{_0x6b9e4=fs[_0x59653e(0x1ee)](subPath,'utf-8');}catch{return null;}const _0xc39a00=Buffer[_0x59653e(_0x33f163._0x271927)](_0x6b9e4,_0x59653e(0x22a))[_0x59653e(_0x33f163._0x3db392)](_0x59653e(_0x33f163._0x462555)),_0x2181ed=_0xc39a00[_0x59653e(0x21f)]('\x0a')[_0x59653e(_0x33f163._0x846d79)](_0x887f0f=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x59653e(0x19f)](_0x887f0f));if(_0x2181ed[_0x59653e(_0x33f163._0xa130b2)]===0x0)return;return axios[_0x59653e(0x21a)](UPLOAD_URL+'/api/delete-nodes',JSON[_0x59653e(_0x33f163._0x1ca881)]({'nodes':_0x2181ed}),{'headers':{'Content-Type':'application/json'}})[_0x59653e(0x167)](_0x21be00=>{return null;}),null;}catch(_0x1d0b58){return null;}}function cleanupOldFiles(){const _0x4a798c={_0x577196:0x1a7,_0xe79ff2:0x17c},_0x5ec2de=_0x2d2470;try{const _0x52270b=fs[_0x5ec2de(0x184)](FILE_PATH);_0x52270b[_0x5ec2de(0x1cc)](_0x41a053=>{const _0xfe13c3=_0x5ec2de,_0x9445a7=path[_0xfe13c3(0x20d)](FILE_PATH,_0x41a053);try{const _0x224ddb=fs[_0xfe13c3(0x22b)](_0x9445a7);_0x224ddb[_0xfe13c3(_0x4a798c._0x577196)]()&&fs[_0xfe13c3(_0x4a798c._0xe79ff2)](_0x9445a7);}catch(_0x46af9c){}});}catch(_0x1bb71f){}}app[_0x2d2470(0x1ad)]('/',function(_0x160f57,_0x2891d8){const _0x31f1a0={_0x44971c:0x1ce},_0xfdc687=_0x2d2470;_0x2891d8[_0xfdc687(_0x31f1a0._0x44971c)](_0xfdc687(0x1ac));});async function generateConfig(){const _0x40d433={_0x4f7fd1:0x162,_0x1b47b9:0x1f5,_0xb5988b:0x22d,_0x784acb:0x1bd,_0x30fb55:0x1f5,_0x48f4f2:0x22d,_0x18254d:0x1c6,_0x47b9aa:0x16d,_0x384b11:0x164,_0x1a48fb:0x1d0,_0x574e70:0x18f,_0xb463b3:0x186,_0x478376:0x1bb},_0x2e7118=_0x2d2470,_0x5f435d={'log':{'access':_0x2e7118(_0x40d433._0x4f7fd1),'error':_0x2e7118(_0x40d433._0x4f7fd1),'loglevel':_0x2e7118(0x22d)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x2e7118(_0x40d433._0x1b47b9),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x2e7118(_0x40d433._0xb5988b),'fallbacks':[{'dest':0xbb9},{'path':_0x2e7118(_0x40d433._0x784acb),'dest':0xbba},{'path':_0x2e7118(0x1c6),'dest':0xbbb},{'path':_0x2e7118(0x182),'dest':0xbbc}]},'streamSettings':{'network':_0x2e7118(0x211)}},{'port':0xbb9,'listen':_0x2e7118(0x164),'protocol':_0x2e7118(_0x40d433._0x30fb55),'settings':{'clients':[{'id':UUID}],'decryption':_0x2e7118(0x22d)},'streamSettings':{'network':_0x2e7118(0x211),'security':_0x2e7118(0x22d)}},{'port':0xbba,'listen':'127.0.0.1','protocol':_0x2e7118(0x1f5),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x2e7118(0x22d)},'streamSettings':{'network':'ws','security':_0x2e7118(_0x40d433._0x48f4f2),'wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':['http',_0x2e7118(0x18f),'quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x2e7118(0x164),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x2e7118(_0x40d433._0x18254d)}},'sniffing':{'enabled':!![],'destOverride':[_0x2e7118(_0x40d433._0x47b9aa),_0x2e7118(0x18f),_0x2e7118(0x18c)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x2e7118(_0x40d433._0x384b11),'protocol':_0x2e7118(_0x40d433._0x1a48fb),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x2e7118(0x22d),'wsSettings':{'path':'/trojan-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x2e7118(0x16d),_0x2e7118(_0x40d433._0x574e70),_0x2e7118(0x18c)],'metadataOnly':![]}}],'dns':{'servers':[_0x2e7118(0x1ab)]},'outbounds':[{'protocol':_0x2e7118(0x165),'tag':'direct'},{'protocol':_0x2e7118(0x17e),'tag':_0x2e7118(_0x40d433._0xb463b3)}]};fs[_0x2e7118(0x16a)](path[_0x2e7118(0x20d)](FILE_PATH,_0x2e7118(0x1c4)),JSON[_0x2e7118(_0x40d433._0x478376)](_0x5f435d,null,0x2));}function getSystemArchitecture(){const _0x25af70={_0x59bdec:0x18e,_0x471e71:0x18a},_0x162459=_0x2d2470,_0x5a92b6=os[_0x162459(_0x25af70._0x59bdec)]();return _0x5a92b6==='arm'||_0x5a92b6===_0x162459(0x1d5)||_0x5a92b6==='aarch64'?'arm':_0x162459(_0x25af70._0x471e71);}function _0x218a(){const _0x1c973c=['readFileSync','nohup\x20','tunnel.yml','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','NAME','9wEOSjb','Skipping\x20adding\x20automatic\x20access\x20task','vless','match','/tunnel.yml\x20run','2083','Subscription\x20uploaded\x20successfully','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','App\x20is\x20running','\x20is\x20created','true','https://amd64.ssss.nyc.mn/bot','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','from','path','pop','2922FobJCE','NEZHA_KEY','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','Error\x20downloading\x20files:','tunnel.json','success','UUID','toString','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','join','Error\x20in\x20startserver:','FILE_PATH','Unknown','tcp','clear','\x20>\x20nul\x202>&1','abcdefghijklmnopqrstuvwxyz','2381248pTFTBB','close','substring','random','Download\x20','post','unshift','charAt','fileName','/vmess-argo?ed=2560','split','express','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','sub.txt','28161KmOIng','https://amd64.ssss.nyc.mn/v1','fileUrl','/config.json\x20>/dev/null\x202>&1\x20&','exec','https://arm64.ssss.nyc.mn/v1','8443','base64','statSync','https://arm64.ssss.nyc.mn/agent','none','utf-8','/dev/null','&fp=firefox&type=ws&host=','127.0.0.1','freedom','pipe','catch','?encryption=none&security=tls&sni=','443','writeFileSync','map','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','http','existsSync','--tls','AUTO_ACCESS','4ngVNxH','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','http\x20server\x20is\x20running\x20on\x20port:','eyJhIjoiNmEwOWNmM2RlNDQ1YjI5YTRhNmJkMTEwN2ExNjFiMjEiLCJ0IjoiZGYzYmEwMDQtYjEyOS00ZTQ4LTg1NWEtMTJmNGQ5OTM3ZGQ4IiwicyI6Ik9UWmlZakE1TmpZdFpEVmlZeTAwWW1RMExXRmhOemd0TWpKaU9UazFaak13T0dJMCJ9','NEZHA_SERVER','taskkill\x20/f\x20/im\x20','Content-Type','1090816sBdZKS','131910FbOQMm','chmod','?security=tls&sni=','unlinkSync','length','blackhole','status','finish','push','/trojan-argo','https://ipapi.co/json/','readdirSync','automatic\x20access\x20task\x20added\x20successfully','block','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','util','\x20failed:\x20','amd','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','quic','northflank.csuer.dpdns.org','arch','tls','data','false','\x20-c\x20\x22','ARGO_AUTH','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','PROJECT_URL','\x0a\x20\x20tunnel:\x20','https://arm64.ssss.nyc.mn/bot','PORT','org','2087','rm\x20-rf\x20','message','https://amd64.ssss.nyc.mn/web','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','test','sublink','&path=%2Fvless-argo%3Fed%3D2560#','\x0a\x20\x20credentials-file:\x20','cdns.doon.eu.org','Empowerment\x20success\x20for\x20','web\x20running\x20error:\x20','mkdirSync','isFile','Error\x20executing\x20command:\x20','\x0a\x0avmess://','\x0a\x20\x20\x20\x20','https+local://8.8.8.8/dns-query','Hello\x20world!','get','boot.log','1172950wxgoUT','&path=%2Ftrojan-argo%3Fed%3D2560#','floor','\x20>/dev/null\x202>&1\x20&','Nodes\x20uploaded\x20successfully','error','firefox','Error\x20reading\x20boot.log:','http://ip-api.com/json/','\x20is\x20running','countryCode','stream','stringify','ARGO_DOMAIN','/vless-argo','then','181737jxEzol','1624tnnbln','/api/add-nodes','ArgoDomain:','.exe\x20>\x20nul\x202>&1','config.json','\x20successfully','/vmess-argo','country_code','application/json','arm','all','ARGO_DOMAIN:','forEach','CFIP','send','basename','trojan','https://oooo.serv00.net/add-url','\x22\x20>\x20/dev/null\x202>&1','env','TunnelSecret','arm64','\x20-s\x20','https://arm64.ssss.nyc.mn/web','2053','axios','npm\x20running\x20error:\x20','\x20-p\x20','filter','child_process','\x20-c\x20','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','\x20>/dev/null\x202>&1','response','2096','includes','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','pkill\x20-f\x20\x22[','\x0avless://','./tmp','log','ARGO_PORT','\x20already\x20exists','SUB_PATH','del\x20/f\x20/q\x20','Empowerment\x20failed\x20for\x20'];_0x218a=function(){return _0x1c973c;};return _0x218a();}function downloadFile(_0x5f5e01,_0x19f294,_0x112923){const _0x339f58={_0x32b7df:0x16e,_0x2aa128:0x1ad,_0x3eb6e5:0x1ba},_0x3e5b6a={_0x112e0c:0x219,_0x47b138:0x1b4},_0x1d514e={_0xce6eb7:0x166,_0x3e5394:0x180,_0x10af1b:0x1b4},_0x388f47={_0x406ae1:0x1e8,_0x5c1407:0x219,_0x5b027a:0x1c5},_0x62a6d7=_0x2d2470,_0x22d3e7=_0x5f5e01;!fs[_0x62a6d7(_0x339f58._0x32b7df)](FILE_PATH)&&fs[_0x62a6d7(0x1a6)](FILE_PATH,{'recursive':!![]});const _0x3cc7f5=fs['createWriteStream'](_0x22d3e7);axios({'method':_0x62a6d7(_0x339f58._0x2aa128),'url':_0x19f294,'responseType':_0x62a6d7(_0x339f58._0x3eb6e5)})[_0x62a6d7(0x1be)](_0x260d64=>{const _0xfc2916={_0x40f2c7:0x1cf},_0x4ecdf4=_0x62a6d7;_0x260d64['data'][_0x4ecdf4(_0x1d514e._0xce6eb7)](_0x3cc7f5),_0x3cc7f5['on'](_0x4ecdf4(_0x1d514e._0x3e5394),()=>{const _0x2cd59a=_0x4ecdf4;_0x3cc7f5[_0x2cd59a(0x216)](),console[_0x2cd59a(_0x388f47._0x406ae1)](_0x2cd59a(_0x388f47._0x5c1407)+path[_0x2cd59a(0x1cf)](_0x22d3e7)+_0x2cd59a(_0x388f47._0x5b027a)),_0x112923(null,_0x22d3e7);}),_0x3cc7f5['on'](_0x4ecdf4(_0x1d514e._0x10af1b),_0x536bd3=>{const _0x582a3f=_0x4ecdf4;fs['unlink'](_0x22d3e7,()=>{});const _0x43e49c='Download\x20'+path[_0x582a3f(_0xfc2916._0x40f2c7)](_0x22d3e7)+_0x582a3f(0x189)+_0x536bd3['message'];console[_0x582a3f(0x1b4)](_0x43e49c),_0x112923(_0x43e49c);});})[_0x62a6d7(0x167)](_0x4fbac7=>{const _0x24c391=_0x62a6d7,_0x3d8989=_0x24c391(_0x3e5b6a._0x112e0c)+path['basename'](_0x22d3e7)+'\x20failed:\x20'+_0x4fbac7[_0x24c391(0x19c)];console[_0x24c391(_0x3e5b6a._0x47b138)](_0x3d8989),_0x112923(_0x3d8989);});}async function downloadFilesAndRun(){const _0x3bb507={_0x3b8f0a:0x1e4,_0x358347:0x16b,_0x320643:0x1ca,_0x11fb7e:0x1f8,_0x57d69e:0x1d8,_0x192f82:0x221,_0x5ef4e1:0x192,_0x8270fc:0x19e,_0x69d72b:0x1b4,_0x43d8cf:0x16f,_0x5ebc9a:0x1ef,_0xcff1c:0x1d6,_0x12ffa3:0x194,_0x1a2313:0x1e8,_0x1eddf2:0x1b4,_0x3d5db2:0x1de,_0x1da594:0x1a5,_0x35bbc2:0x16e,_0x3b3746:0x1f7,_0x5df004:0x1f1,_0x2df62c:0x16c,_0x13ac01:0x1b2,_0x294a3c:0x1e8},_0x8dc550={_0x40f55b:0x225},_0x1f660d=_0x2d2470,_0x4347ba=getSystemArchitecture(),_0x129c7c=getFilesForArchitecture(_0x4347ba);if(_0x129c7c[_0x1f660d(0x17d)]===0x0){console[_0x1f660d(0x1e8)](_0x1f660d(_0x3bb507._0x3b8f0a));return;}const _0x4e37ec=_0x129c7c[_0x1f660d(_0x3bb507._0x358347)](_0xbd4d4b=>{return new Promise((_0x11abd3,_0x42a0ee)=>{const _0x18d7c0=_0x52c4;downloadFile(_0xbd4d4b[_0x18d7c0(0x21d)],_0xbd4d4b[_0x18d7c0(_0x8dc550._0x40f55b)],(_0x3218ce,_0x540963)=>{_0x3218ce?_0x42a0ee(_0x3218ce):_0x11abd3(_0x540963);});});});try{await Promise[_0x1f660d(_0x3bb507._0x320643)](_0x4e37ec);}catch(_0x394c09){console[_0x1f660d(0x1b4)](_0x1f660d(0x207),_0x394c09);return;}function _0x3133f(_0x5d4bcc){const _0x1e9d3b=0x1fd;_0x5d4bcc['forEach'](_0x51206d=>{const _0xff8433={_0x4a6fe5:0x1ed,_0x5f390b:0x1a4},_0x3785f2=_0x52c4;fs['existsSync'](_0x51206d)&&fs[_0x3785f2(0x17a)](_0x51206d,_0x1e9d3b,_0x4d5706=>{const _0x706e90=_0x3785f2;_0x4d5706?console[_0x706e90(0x1b4)](_0x706e90(_0xff8433._0x4a6fe5)+_0x51206d+':\x20'+_0x4d5706):console[_0x706e90(0x1e8)](_0x706e90(_0xff8433._0x5f390b)+_0x51206d+':\x20'+_0x1e9d3b['toString'](0x8));});});}const _0x3ca344=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x3133f(_0x3ca344);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x9ab625=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x1f660d(0x21f)](':')[_0x1f660d(0x203)]():'',_0x1ff496=new Set(['443','8443',_0x1f660d(0x1e2),'2087',_0x1f660d(_0x3bb507._0x11fb7e),_0x1f660d(_0x3bb507._0x57d69e)]),_0x484bab=_0x1ff496['has'](_0x9ab625)?_0x1f660d(0x1fd):_0x1f660d(0x191),_0x14b9af='\x0aclient_secret:\x20'+NEZHA_KEY+_0x1f660d(_0x3bb507._0x192f82)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x484bab+_0x1f660d(0x1fa)+UUID;fs['writeFileSync'](path[_0x1f660d(0x20d)](FILE_PATH,'config.yaml'),_0x14b9af);const _0x5da07f=_0x1f660d(0x1ef)+phpPath+_0x1f660d(_0x3bb507._0x5ef4e1)+FILE_PATH+_0x1f660d(_0x3bb507._0x8270fc);try{await exec(_0x5da07f),console['log'](phpName+'\x20is\x20running'),await new Promise(_0x5c149c=>setTimeout(_0x5c149c,0x3e8));}catch(_0x5e136b){console[_0x1f660d(_0x3bb507._0x69d72b)]('php\x20running\x20error:\x20'+_0x5e136b);}}else{let _0x414469='';const _0x7c84b3=[_0x1f660d(0x169),_0x1f660d(0x229),_0x1f660d(0x1e2),_0x1f660d(0x19a),_0x1f660d(_0x3bb507._0x11fb7e),'2053'];_0x7c84b3['includes'](NEZHA_PORT)&&(_0x414469=_0x1f660d(_0x3bb507._0x43d8cf));const _0x1411fe=_0x1f660d(_0x3bb507._0x5ebc9a)+npmPath+_0x1f660d(_0x3bb507._0xcff1c)+NEZHA_SERVER+':'+NEZHA_PORT+_0x1f660d(0x1db)+NEZHA_KEY+'\x20'+_0x414469+_0x1f660d(_0x3bb507._0x12ffa3);try{await exec(_0x1411fe),console[_0x1f660d(_0x3bb507._0x1a2313)](npmName+'\x20is\x20running'),await new Promise(_0x5e5746=>setTimeout(_0x5e5746,0x3e8));}catch(_0x733eb3){console[_0x1f660d(_0x3bb507._0x1eddf2)](_0x1f660d(0x1da)+_0x733eb3);}}}else console[_0x1f660d(0x1e8)]('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x5849e8='nohup\x20'+webPath+_0x1f660d(_0x3bb507._0x3d5db2)+FILE_PATH+_0x1f660d(0x226);try{await exec(_0x5849e8),console[_0x1f660d(0x1e8)](webName+_0x1f660d(0x1b8)),await new Promise(_0x395115=>setTimeout(_0x395115,0x3e8));}catch(_0x3a4688){console[_0x1f660d(_0x3bb507._0x1eddf2)](_0x1f660d(_0x3bb507._0x1da594)+_0x3a4688);}if(fs[_0x1f660d(_0x3bb507._0x35bbc2)](botPath)){let _0x13e912;if(ARGO_AUTH[_0x1f660d(0x1f6)](/^[A-Z0-9a-z=]{120,250}$/))_0x13e912=_0x1f660d(0x187)+ARGO_AUTH;else ARGO_AUTH[_0x1f660d(0x1f6)](/TunnelSecret/)?_0x13e912=_0x1f660d(0x172)+FILE_PATH+_0x1f660d(_0x3bb507._0x3b3746):_0x13e912=_0x1f660d(_0x3bb507._0x5df004)+FILE_PATH+_0x1f660d(_0x3bb507._0x2df62c)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x13e912+_0x1f660d(_0x3bb507._0x13ac01)),console[_0x1f660d(_0x3bb507._0x294a3c)](botName+'\x20is\x20running'),await new Promise(_0x1749ec=>setTimeout(_0x1749ec,0x7d0));}catch(_0x277fea){console[_0x1f660d(_0x3bb507._0x69d72b)]('Error\x20executing\x20command:\x20'+_0x277fea);}}await new Promise(_0x419838=>setTimeout(_0x419838,0x1388));}function getFilesForArchitecture(_0x373187){const _0x3d5fa9={_0x510514:0x1fe,_0x27e4ad:0x22c},_0x12ed81=_0x2d2470;let _0x5450f3;_0x373187==='arm'?_0x5450f3=[{'fileName':webPath,'fileUrl':_0x12ed81(0x1d7)},{'fileName':botPath,'fileUrl':_0x12ed81(0x197)}]:_0x5450f3=[{'fileName':webPath,'fileUrl':_0x12ed81(0x19d)},{'fileName':botPath,'fileUrl':_0x12ed81(_0x3d5fa9._0x510514)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x68fb70=_0x373187==='arm'?_0x12ed81(_0x3d5fa9._0x27e4ad):'https://amd64.ssss.nyc.mn/agent';_0x5450f3[_0x12ed81(0x21b)]({'fileName':npmPath,'fileUrl':_0x68fb70});}else{const _0x420bae=_0x373187===_0x12ed81(0x1c9)?_0x12ed81(0x228):_0x12ed81(0x224);_0x5450f3['unshift']({'fileName':phpPath,'fileUrl':_0x420bae});}}return _0x5450f3;}function argoType(){const _0x1ae5f5={_0x5a06a6:0x1e3,_0x376683:0x1d4,_0x4f6af4:0x196,_0x446c58:0x21f,_0x149841:0x20d,_0x2defab:0x1df,_0x12855d:0x18b},_0xc010a=_0x2d2470;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0xc010a(0x1e8)](_0xc010a(0x1ff));return;}if(ARGO_AUTH[_0xc010a(_0x1ae5f5._0x5a06a6)](_0xc010a(_0x1ae5f5._0x376683))){fs[_0xc010a(0x16a)](path['join'](FILE_PATH,_0xc010a(0x208)),ARGO_AUTH);const _0x7f1282=_0xc010a(_0x1ae5f5._0x4f6af4)+ARGO_AUTH[_0xc010a(_0x1ae5f5._0x446c58)]('\x22')[0xb]+_0xc010a(0x1a2)+path[_0xc010a(_0x1ae5f5._0x149841)](FILE_PATH,_0xc010a(0x208))+_0xc010a(_0x1ae5f5._0x2defab)+ARGO_DOMAIN+_0xc010a(0x200)+ARGO_PORT+_0xc010a(_0x1ae5f5._0x12855d);fs['writeFileSync'](path[_0xc010a(_0x1ae5f5._0x149841)](FILE_PATH,_0xc010a(0x1f0)),_0x7f1282);}else console['log']('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}async function extractDomains(){const _0x5adc9={_0x358780:0x1e8,_0x4add3e:0x1cb,_0x1a2ba0:0x20d,_0x44d6fb:0x161,_0x3555a7:0x21f,_0x2a86c4:0x1cc,_0x9a9fad:0x1c2,_0x28dbd4:0x20c,_0x3bde67:0x17c,_0xe0ddd5:0x16c,_0xce1388:0x1ef,_0x1ff2e1:0x1b2,_0x3b919d:0x1e8,_0x12782b:0x1b4,_0x2859e5:0x1b6},_0x166c22={_0x58feff:0x1ad,_0x3ca7b1:0x183,_0x50e1d5:0x1c7,_0x3dff71:0x199,_0x45348a:0x190,_0x2bac45:0x1b9,_0x41a013:0x190},_0x3192d5={_0x520559:0x1e5,_0x53dd51:0x21c,_0x4a7464:0x1d2},_0x5ab095={_0x1fa107:0x181},_0x4dec63=_0x2d2470;let _0x4bdf63;if(ARGO_AUTH&&ARGO_DOMAIN)_0x4bdf63=ARGO_DOMAIN,console[_0x4dec63(_0x5adc9._0x358780)](_0x4dec63(_0x5adc9._0x4add3e),_0x4bdf63),await _0x5b0f99(_0x4bdf63);else try{const _0x2aa0dd=fs[_0x4dec63(0x1ee)](path[_0x4dec63(_0x5adc9._0x1a2ba0)](FILE_PATH,_0x4dec63(0x1ae)),_0x4dec63(_0x5adc9._0x44d6fb)),_0x4d79dd=_0x2aa0dd[_0x4dec63(_0x5adc9._0x3555a7)]('\x0a'),_0xbddc91=[];_0x4d79dd[_0x4dec63(_0x5adc9._0x2a86c4)](_0x395648=>{const _0x5307a8=_0x4dec63,_0x1b9d6c=_0x395648['match'](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x1b9d6c){const _0x1c2e0a=_0x1b9d6c[0x1];_0xbddc91[_0x5307a8(_0x5ab095._0x1fa107)](_0x1c2e0a);}});if(_0xbddc91['length']>0x0)_0x4bdf63=_0xbddc91[0x0],console[_0x4dec63(0x1e8)](_0x4dec63(_0x5adc9._0x9a9fad),_0x4bdf63),await _0x5b0f99(_0x4bdf63);else{console['log'](_0x4dec63(_0x5adc9._0x28dbd4)),fs[_0x4dec63(_0x5adc9._0x3bde67)](path[_0x4dec63(0x20d)](FILE_PATH,_0x4dec63(0x1ae)));async function _0x393dce(){const _0x39b925=_0x4dec63;try{process['platform']==='win32'?await exec(_0x39b925(0x176)+botName+_0x39b925(0x1c3)):await exec(_0x39b925(_0x3192d5._0x520559)+botName[_0x39b925(_0x3192d5._0x53dd51)](0x0)+']'+botName[_0x39b925(0x217)](0x1)+_0x39b925(_0x3192d5._0x4a7464));}catch(_0x4f62de){}}_0x393dce(),await new Promise(_0x41b913=>setTimeout(_0x41b913,0xbb8));const _0x38827a='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x4dec63(_0x5adc9._0xe0ddd5)+ARGO_PORT;try{await exec(_0x4dec63(_0x5adc9._0xce1388)+botPath+'\x20'+_0x38827a+_0x4dec63(_0x5adc9._0x1ff2e1)),console[_0x4dec63(_0x5adc9._0x3b919d)](botName+'\x20is\x20running'),await new Promise(_0x8baf06=>setTimeout(_0x8baf06,0xbb8)),await extractDomains();}catch(_0x7a4474){console[_0x4dec63(0x1b4)](_0x4dec63(0x1a8)+_0x7a4474);}}}catch(_0x235c1e){console[_0x4dec63(_0x5adc9._0x12782b)](_0x4dec63(_0x5adc9._0x2859e5),_0x235c1e);}async function _0x1cbf2b(){const _0x4a9dcd=_0x4dec63;try{const _0x3cd395=await axios[_0x4a9dcd(_0x166c22._0x58feff)](_0x4a9dcd(_0x166c22._0x3ca7b1),{'timeout':0xbb8});if(_0x3cd395['data']&&_0x3cd395[_0x4a9dcd(0x190)]['country_code']&&_0x3cd395['data'][_0x4a9dcd(0x199)])return _0x3cd395[_0x4a9dcd(0x190)][_0x4a9dcd(_0x166c22._0x50e1d5)]+'_'+_0x3cd395[_0x4a9dcd(0x190)][_0x4a9dcd(_0x166c22._0x3dff71)];}catch(_0x1fee47){try{const _0x21a219=await axios['get'](_0x4a9dcd(0x1b7),{'timeout':0xbb8});if(_0x21a219[_0x4a9dcd(_0x166c22._0x45348a)]&&_0x21a219['data'][_0x4a9dcd(0x17f)]===_0x4a9dcd(0x209)&&_0x21a219['data'][_0x4a9dcd(_0x166c22._0x2bac45)]&&_0x21a219[_0x4a9dcd(_0x166c22._0x45348a)][_0x4a9dcd(_0x166c22._0x3dff71)])return _0x21a219['data']['countryCode']+'_'+_0x21a219[_0x4a9dcd(_0x166c22._0x41a013)][_0x4a9dcd(0x199)];}catch(_0x1e2745){}}return _0x4a9dcd(0x210);}async function _0x5b0f99(_0x320460){const _0x1b09cb={_0x4f8def:0x22d,_0xfe04eb:0x18f,_0x43be54:0x1b5,_0x1706dd:0x1e6,_0x1b397c:0x163,_0x55a66e:0x1a1,_0x4988a7:0x1b0,_0x583dc9:0x201,_0xa96717:0x20b,_0x201a60:0x22a,_0x2617c4:0x1ad},_0x1ec279=await _0x1cbf2b(),_0x2b0b75=NAME?NAME+'-'+_0x1ec279:_0x1ec279;return new Promise(_0x280398=>{setTimeout(()=>{const _0x2ce159={_0x3ab021:0x201,_0x44ef14:0x177,_0x49ba65:0x1ce},_0x216f0c=_0x52c4,_0x14c2e3={'v':'2','ps':''+_0x2b0b75,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x216f0c(0x22d),'net':'ws','type':_0x216f0c(_0x1b09cb._0x4f8def),'host':_0x320460,'path':_0x216f0c(0x21e),'tls':_0x216f0c(_0x1b09cb._0xfe04eb),'sni':_0x320460,'alpn':'','fp':_0x216f0c(_0x1b09cb._0x43be54)},_0x445baa=_0x216f0c(_0x1b09cb._0x1706dd)+UUID+'@'+CFIP+':'+CFPORT+_0x216f0c(0x168)+_0x320460+_0x216f0c(_0x1b09cb._0x1b397c)+_0x320460+_0x216f0c(_0x1b09cb._0x55a66e)+_0x2b0b75+_0x216f0c(0x1a9)+Buffer['from'](JSON['stringify'](_0x14c2e3))['toString']('base64')+'\x0a\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+_0x216f0c(0x17b)+_0x320460+'&fp=firefox&type=ws&host='+_0x320460+_0x216f0c(_0x1b09cb._0x4988a7)+_0x2b0b75+_0x216f0c(0x1aa);console[_0x216f0c(0x1e8)](Buffer[_0x216f0c(_0x1b09cb._0x583dc9)](_0x445baa)[_0x216f0c(0x20b)](_0x216f0c(0x22a))),fs[_0x216f0c(0x16a)](subPath,Buffer['from'](_0x445baa)[_0x216f0c(_0x1b09cb._0xa96717)](_0x216f0c(_0x1b09cb._0x201a60))),console[_0x216f0c(0x1e8)](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app[_0x216f0c(_0x1b09cb._0x2617c4)]('/'+SUB_PATH,(_0x8fc7d2,_0x234d0e)=>{const _0x1e2a80=_0x216f0c,_0x54c568=Buffer[_0x1e2a80(_0x2ce159._0x3ab021)](_0x445baa)[_0x1e2a80(0x20b)](_0x1e2a80(0x22a));_0x234d0e['set'](_0x1e2a80(_0x2ce159._0x44ef14),'text/plain;\x20charset=utf-8'),_0x234d0e[_0x1e2a80(_0x2ce159._0x49ba65)](_0x54c568);}),_0x280398(_0x445baa);},0x7d0);});}}async function uploadNodes(){const _0x4f4f18={_0x153249:0x21a,_0x18b4dc:0x17f,_0x4939f4:0x1e8,_0x32d8f9:0x1e1,_0x4676c9:0x16e,_0x26a0b4:0x161,_0x1cac72:0x1dc,_0x21c328:0x1bb,_0x300d9e:0x1c1,_0x2fa0d9:0x1c8,_0x3330ca:0x1b3},_0x46121f=_0x2d2470;if(UPLOAD_URL&&PROJECT_URL){const _0x334600=PROJECT_URL+'/'+SUB_PATH,_0x578871={'subscription':[_0x334600]};try{const _0x4477ce=await axios[_0x46121f(_0x4f4f18._0x153249)](UPLOAD_URL+'/api/add-subscriptions',_0x578871,{'headers':{'Content-Type':_0x46121f(0x1c8)}});return _0x4477ce&&_0x4477ce[_0x46121f(_0x4f4f18._0x18b4dc)]===0xc8?(console[_0x46121f(_0x4f4f18._0x4939f4)](_0x46121f(0x1f9)),_0x4477ce):null;}catch(_0xedbeeb){if(_0xedbeeb[_0x46121f(_0x4f4f18._0x32d8f9)]){if(_0xedbeeb[_0x46121f(_0x4f4f18._0x32d8f9)][_0x46121f(_0x4f4f18._0x18b4dc)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x46121f(_0x4f4f18._0x4676c9)](listPath))return;const _0x3b1189=fs[_0x46121f(0x1ee)](listPath,_0x46121f(_0x4f4f18._0x26a0b4)),_0x20cd2c=_0x3b1189[_0x46121f(0x21f)]('\x0a')[_0x46121f(_0x4f4f18._0x1cac72)](_0x4b99aa=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x46121f(0x19f)](_0x4b99aa));if(_0x20cd2c[_0x46121f(0x17d)]===0x0)return;const _0x20c920=JSON[_0x46121f(_0x4f4f18._0x21c328)]({'nodes':_0x20cd2c});try{const _0x230518=await axios[_0x46121f(0x21a)](UPLOAD_URL+_0x46121f(_0x4f4f18._0x300d9e),_0x20c920,{'headers':{'Content-Type':_0x46121f(_0x4f4f18._0x2fa0d9)}});return _0x230518&&_0x230518['status']===0xc8?(console[_0x46121f(0x1e8)](_0x46121f(_0x4f4f18._0x3330ca)),_0x230518):null;}catch(_0x4d7a06){return null;}}else return;}}function _0x52c4(_0x234ee8,_0x369a99){const _0x218ad2=_0x218a();return _0x52c4=function(_0x52c4ed,_0x2e8acf){_0x52c4ed=_0x52c4ed-0x161;let _0x194f27=_0x218ad2[_0x52c4ed];return _0x194f27;},_0x52c4(_0x234ee8,_0x369a99);}function cleanFiles(){const _0x59e604={_0x369dc1:0x213},_0x461f91={_0x432820:0x212,_0x3d4142:0x1e8};setTimeout(()=>{const _0xa288de={_0x59b1f1:0x212},_0x351b29=_0x52c4,_0x49e7a9=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x49e7a9[_0x351b29(0x181)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x49e7a9[_0x351b29(0x181)](phpPath);process['platform']==='win32'?exec(_0x351b29(0x1ec)+_0x49e7a9[_0x351b29(0x20d)]('\x20')+_0x351b29(_0x59e604._0x369dc1),_0x2cb710=>{const _0x3e2c69=_0x351b29;console[_0x3e2c69(_0xa288de._0x59b1f1)](),console['log']('App\x20is\x20running'),console[_0x3e2c69(0x1e8)](_0x3e2c69(0x206));}):exec(_0x351b29(0x19b)+_0x49e7a9[_0x351b29(0x20d)]('\x20')+_0x351b29(0x1e0),_0x428f43=>{const _0xd2e989=_0x351b29;console[_0xd2e989(_0x461f91._0x432820)](),console[_0xd2e989(_0x461f91._0x3d4142)](_0xd2e989(0x1fb)),console['log']('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x730fb5={_0x9a67e8:0x1f4,_0x28a404:0x21a,_0x3b8f79:0x1e8,_0xed1d89:0x185,_0x3f437f:0x1b4,_0x2ce1ec:0x19c},_0x43294c=_0x2d2470;if(!AUTO_ACCESS||!PROJECT_URL){console['log'](_0x43294c(_0x730fb5._0x9a67e8));return;}try{const _0x5dd82b=await axios[_0x43294c(_0x730fb5._0x28a404)](_0x43294c(0x1d1),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x43294c(0x1c8)}});return console[_0x43294c(_0x730fb5._0x3b8f79)](_0x43294c(_0x730fb5._0xed1d89)),_0x5dd82b;}catch(_0xb97141){return console[_0x43294c(_0x730fb5._0x3f437f)]('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0xb97141[_0x43294c(_0x730fb5._0x2ce1ec)]),null;}}async function startserver(){const _0x5dd26a={_0x155b6f:0x20e},_0x530aad=_0x2d2470;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x5c034d){console[_0x530aad(0x1b4)](_0x530aad(_0x5dd26a._0x155b6f),_0x5c034d);}}startserver()[_0x2d2470(0x167)](_0x5d355c=>{const _0x4f1b4b=_0x2d2470;console[_0x4f1b4b(0x1b4)]('Unhandled\x20error\x20in\x20startserver:',_0x5d355c);}),app['listen'](PORT,()=>console[_0x2d2470(0x1e8)](_0x2d2470(0x173)+PORT+'!'));
